---  
share: true  
aliases:  
  - 2024-11-23  
title: 2024-11-23  
URL: https://bagrounds.org/reflections/2024-11-23  
Author: "[[bryan-grounds]]"  
tags:   
---  
[Home](../index.md) > [Reflections](./index.md) | [‚èÆÔ∏è](./2024-11-21.md)  
# 2024-11-23  
## ‚ûï Improving My Reflection Template  
### üñºÔ∏è Context  
1. [I Blog From Obsidian](./2024-04-21.md#‚úç%20Blogging%20From%20Obsidian)  
2. I automate the creation of reflections with Templater.  
3. But my process isn't fully automated.  
  1. I manually update the link to the previous reflection.  
  2. And I add the next reflection link to the previous reflection semi-manually.  
4. I want to blog more.  
5. Theory: (all else equal) the easier it is, the more often I'll do it.  
  
### üéØ Goal  
Reduce tedium in my blogging process.  
  
### üìê Specification  
Update my reflection template to  
1. Insert the link to the previous reflection  
2. Insert the link to this reflection in the previous reflection  
  
### ü™ú Steps  
#### 1. ü§ñ Ask ChatGPT to Code  
##### ‚ùî Initial Prompt  
> I have an obsidian templater template to create a file in a folder.  
Each file in this folder is named after the current date: YYYY-MM-DD.  
I want to update the template to include a link to the most recent file.  
Can you write me a snippet of templater code to do this?  
  
##### üó®Ô∏è Initial Response (Sans Explanation)  
_‚ö†Ô∏è Warning: this code is slightly broken_  
```js  
<%*  
const folderPath = 'your/folder/path'; // Replace with the path to your folder  
const today = tp.date.now("YYYY-MM-DD");  
const files = app.vault.getFiles();  
const recentFile = files  
  .filter(file => file.path.startsWith(folderPath) && file.name <= today)  
  .sort((a, b) => b.name.localeCompare(a.name))[0]; // Get the most recent file  
const link = recentFile ? `[[${recentFile.name}]]` : "No recent file found"; // Create link  
link  
%>  
```  
#### 2. üîßModify -> ‚ñ∂Ô∏èüëÄTest -> ‚ôªÔ∏èRepeat  
The first snippet didn't work.  
ChatGPT and I fixed errors and iterated.  
  
```mermaid  
flowchart TB  
    subgraph Loop[ ]  
        direction LR  
        R("‚ñ∂Ô∏è Run Template") --> F("üêõüëÄ Failure") --> C("üîß Change Code") --> R  
    end  
  
    R --> S("üí∞üëÄ Success")  
  
style Loop fill:none,stroke:none  
```  
  
### üìú Result  
```js  
[[index|Home]] > [[reflections/index|Reflections]] | <%*  
const folderPath = 'reflections'  
const today = tp.date.now("YYYY-MM-DD")  
const files = app.vault.getFiles()  
const recentFile = files  
  .filter(file => file.path.startsWith(folderPath) && file.name <= today)  
  .sort((a, b) => b.name.localeCompare(a.name))[0]  
  
const stripExtension = p => p.replace(/\.[^.]+$/, '')  
  
if (recentFile) {  
  const recentFilePath = stripExtension(recentFile.path)  
  const currentFilePath = recentFilePath.replace(/\d{4}(-\d{2}){2}/, today)  
  tR += `[[${recentFilePath}|‚èÆÔ∏è]]`  
  const recentFileContent = await app.vault.read(recentFile)  
  const nextLink = `‚èÆÔ∏è]] [[${currentFilePath}|‚è≠Ô∏è]]`  
  const updatedContent = recentFileContent.replace('‚èÆÔ∏è]]', nextLink)  
  await app.vault.modify(recentFile, updatedContent)  
} else {  
  tR += "No recent file found"  
}  
%>  
```  
