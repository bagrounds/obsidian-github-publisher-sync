---  
share: true  
aliases:  
  - 2024-11-23  
title: 2024-11-23  
URL: https://bagrounds.org/reflections/2024-11-23  
Author: "[[bryan-grounds]]"  
tags:   
---  
[Home](../index.md) > [Reflections](./index.md) | [â®ï¸](./2024-11-21.md)  
# 2024-11-23  
## â• Improving My Reflection Template  
### ğŸ–¼ï¸ Context  
1. [I Blog From Obsidian](./2024-04-21.md#âœ%20Blogging%20From%20Obsidian)  
2. I automate the creation of reflections with Templater.  
3. But my process isn't fully automated.  
  1. I manually update the link to the previous reflection.  
  2. And I add the next reflection link to the previous reflection semi-manually.  
4. I want to blog more.  
5. Theory: (all else equal) the easier it is, the more often I'll do it. See the [Tiny Habits Behavior Model](../books/tiny-habits.md#Behavior%20model).  
  
### ğŸ¯ Goal  
Reduce tedium in my blogging process.  
  
### ğŸ“ Specification  
Update my reflection template to  
1. Insert the link to the previous reflection  
2. Insert the link to this reflection in the previous reflection  
  
### ğŸªœ Steps  
#### 1. ğŸ¤– Ask ChatGPT to Code  
##### ğŸ—£ï¸â“ğŸ¤– Initial Prompt  
> I have an obsidian templater template to create a file in a folder.  
Each file in this folder is named after the current date: YYYY-MM-DD.  
I want to update the template to include a link to the most recent file.  
Can you write me a snippet of templater code to do this?  
  
##### ğŸ¤–ğŸ’¬ğŸ¤” Initial Response (Sans Explanation)  
_âš ï¸ Warning: this code is slightly broken_  
```js  
<%*  
const folderPath = 'your/folder/path'; // Replace with the path to your folder  
const today = tp.date.now("YYYY-MM-DD");  
const files = app.vault.getFiles();  
const recentFile = files  
  .filter(file => file.path.startsWith(folderPath) && file.name <= today)  
  .sort((a, b) => b.name.localeCompare(a.name))[0]; // Get the most recent file  
const link = recentFile ? `[[${recentFile.name}]]` : "No recent file found"; // Create link  
link  
%>  
```  
#### 2. ğŸ”§Modify -> â–¶ï¸ğŸ‘€Test -> â™»ï¸Repeat  
The first snippet didn't work.  
ChatGPT and I fixed errors and iterated.  
  
```mermaid  
flowchart TB  
    subgraph Loop[ ]  
        direction LR  
        R("â–¶ï¸ Run Template") --> F("ğŸ›ğŸ‘€ Failure") --> C("ğŸ”§ Change Code") --> R  
    end  
  
    R --> S("ğŸ’°ğŸ‘€ Success")  
  
style Loop fill:none,stroke:none  
```  
  
### ğŸ“œ Result  
My reflection template now automatically creates a previous link pointing to the most recent reflection and modifies that reflection to link to the new one! ğŸ‰ğŸ¤–ğŸ¥‚ğŸ¥³  
  
```js  
[[index|Home]] > [[reflections/index|Reflections]] | <%*  
const folderPath = 'reflections'  
const today = tp.date.now("YYYY-MM-DD")  
const files = app.vault.getFiles()  
const recentFile = files  
  .filter(file => file.path.startsWith(folderPath) && file.name <= today)  
  .sort((a, b) => b.name.localeCompare(a.name))[0]  
  
const stripExtension = p => p.replace(/\.[^.]+$/, '')  
  
if (recentFile) {  
  const recentFilePath = stripExtension(recentFile.path)  
  const currentFilePath = recentFilePath.replace(/\d{4}(-\d{2}){2}/, today)  
  tR += `[[${recentFilePath}|â®ï¸]]`  
  const recentFileContent = await app.vault.read(recentFile)  
  const nextLink = `â®ï¸]] [[${currentFilePath}|â­ï¸]]`  
  const updatedContent = recentFileContent.replace('â®ï¸]]', nextLink)  
  await app.vault.modify(recentFile, updatedContent)  
} else {  
  tR += "No recent file found"  
}  
%>  
```  
