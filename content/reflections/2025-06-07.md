---
share: true
aliases:
  - 2025-06-07 | ğŸšœ Farm | ğŸ’¾ Software  | ğŸ¤• Trauma | ğŸ¤–ğŸ¦ AutoTweet âŒ¨ï¸
title: 2025-06-07 | ğŸšœ Farm | ğŸ’¾ Software  | ğŸ¤• Trauma | ğŸ¤–ğŸ¦ AutoTweet âŒ¨ï¸
URL: https://bagrounds.org/reflections/2025-06-07
Author: "[[bryan-grounds]]"
tags:
  - code
  - bug
---
[Home](../index.md) > [Reflections](./index.md) | [â®ï¸](./2025-06-06.md)  
# 2025-06-07 | ğŸšœ Farm | ğŸ’¾ Software  | ğŸ¤• Trauma | ğŸ¤–ğŸ¦ AutoTweet âŒ¨ï¸  
## ğŸ“š Books  
- [ğŸšœğŸ§‘â€ğŸŒ¾ğŸŒ± Farming for Us All: Practical Agriculture and the Cultivation of Sustainability](../books/farming-for-us-all-practical-agriculture-and-the-cultivation-of-sustainability.md)  
- [ğŸ’»âš™ï¸ Software Engineering at Google: Lessons Learned from Programming Over Time](../books/software-engineering-at-google-lessons-learned-from-programming-over-time.md)  
- [ğŸ–¥ï¸ğŸ”‘ System Design Interview - An Insider's Guide](../books/system-design-interview-an-insiders-guide.md)  
  
## ğŸ“° News  
- [ğŸŒªï¸ğŸ‡ºğŸ‡¸ğŸ“‰ğŸŒ Trumpâ€™s instability and the potential of a post-American world](../videos/trumps-instability-and-the-potential-of-a-post-american-world.md)  
- [ğŸ¤•â¡ï¸ğŸ‘ï¸â• Your reality narrows after trauma â€” hereâ€™s how to expand it | Bessel van der Kolk](../videos/your-reality-narrows-after-trauma-heres-how-to-expand-it-bessel-van-der-kolk.md)  
  
## ğŸ¤–ğŸ¦ Semiautomatic Tweets âŒ¨ï¸  
âœ¨ Obsidian Templater code for opening a ğŸ’» browser window with an ğŸ¤– AI-generated ğŸ¦ tweet, ready to ğŸš€ post.  
  
â“ What this code does:  
1.  ğŸ“– Read the content of the current note ğŸ“  
2.  ğŸ—£ï¸ Ask [Gemini](../software/gemini.md) ğŸ¤– to identify a list of ğŸ·ï¸ topics from the note ğŸ“  
3.  âœï¸ Format a tweet ğŸ¦ with:  
    1.  ğŸ“ƒ the title of the current note ğŸ“  
    2.  ğŸ·ï¸ The formatted topics identified by Gemini ğŸ¤–  
    3.  ğŸŒ The URL to the web page this note is published to ğŸš€  
4.  ğŸ’» Open a browser window ğŸŒ to the ğŸ¦ twitter post form, prefilled with the generated tweet ğŸ¤–âœï¸ ğŸ‰.  
  
```js  
<%*  
const GEMINI_API_KEY = "ğŸ¤« Secret ğŸ—ï¸ key";  
  
const tweetPrompt = (body) => `Identify the main topics in the following.  
Return a pipe separated list of emoji-topic pairs.  
Prefer specific topics (e.g. don't include "Books" - that's too generic).  
Don't use terms that are already present in the title.  
  
2 Examples:  
ğŸ“œ Ancient Wisdom | âš”ï¸ Military Strategy | ğŸ’¡ Timeless Principles | ğŸ§  Strategic Thinking | ğŸ¯ Path to Victory  
ğŸ—ï¸ Principles | ğŸª– Leadership | ğŸ¤” Decisions  
  
---  
  
${body}`  
  
const file = tp.file.find_tfile(tp.file.path(true));  
  
async function generateTextFromGemini(prompt, apiKey, model = "gemini-2.0-flash", search = false) {  
  const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;  
  
  const body = {  
      "contents": [  
          {  
              "parts": [  
                  {"text": prompt }  
              ]  
          }  
      ],  
      "tools": [  
          {  
              "google_search": {}  
          }  
      ]  
  };  
  if (!search) delete body.tools  
  
  
    const response = await fetch(apiUrl, {  
      method: "POST",  
      headers: {  
        "Content-Type": "application/json",  
      },  
      body: JSON.stringify(body),  
    });  
  
    if (!response.ok) {  
      throw new Error(`HTTP error! status: (${response.status}) ${await response.text()}`);  
    }  
  
    const data = await response.json();  
    const { parts } = data.candidates[0].content;  
    if (!parts) {  
      throw new Error(`No parts from Gemini! url='${apiUrl}'! unexpected response: data=(${JSON.stringify(data)})`)  
    }  
    return (parts[1] || parts[0]).text;  
}  
  
const model = 'gemini-2.5-flash-preview-04-17'  
  
try {  
const originalContent = await app.vault.read(file);  
  
const tweetBody = await generateTextFromGemini(tweetPrompt(originalContent), GEMINI_API_KEY)  
      .then(t => t.trim());  
  
const tweet = `${tp.frontmatter.title}  
  
${tweetBody}  
  
${tp.frontmatter.URL}`  
  
const URL = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweet.trim())}`  
window.open(URL);  
  
} catch (error) {  
    tR += `Error: ${error.message}`;  
}  
%>  
```  
  
## ğŸ‘€ğŸ› Bug Report  
- ğŸ‘€ observation  
    - There's a broken link on this page [2025-03-26 | ğŸªµ Record ğŸ¦™ Reason ğŸ—¡ï¸ Represent ğŸŒ](./2025-03-26.md)  
    - The excalidraw video ([âœï¸ğŸ—‚ï¸â±ï¸âœ¨ The Excalidraw Obsidian Showcase 57 key features in just 17 minutes](../the-excalidraw-obsidian-showcase-57-key-features-in-just-17-minutes.md)) is missing the video segment of the URL path  
- ğŸ©º Diagnostics  
    - The Enveloppe [Obsidian](../software/obsidian.md) plugin converts links before committing to GitHub  
    - even though the link is correct and works in my obsidian note, when it's committed, it's missing the video path  
    - Enveloppe is configured to convert links to relative paths, which typically works  
    - so far, I can't tell what's different about this path that's causing to to be converted incorrectly  
